{"version":3,"file":"static/js/158.ab3c52d2.chunk.js","mappings":"sRAEaA,EAAkBC,EAAAA,GAAAA,KAAH,yCAGfC,EAAkBD,EAAAA,GAAAA,GAAH,yCAIfE,EAAcF,EAAAA,GAAAA,EAAH,yC,SCoExB,EApEe,WACb,OAA4BG,EAAAA,EAAAA,UAAS,IAArC,eAAOC,EAAP,KAAeC,EAAf,KACA,GAA0BF,EAAAA,EAAAA,UAAS,IAAnC,eAAOG,EAAP,KAAcC,EAAd,KACMC,GAAWC,EAAAA,EAAAA,MACjB,GAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KACMC,EAAcF,EAAaG,IAAI,UAErCC,EAAAA,EAAAA,YAAU,WACR,GAAKF,EAAL,CAIA,IAAMG,EAAS,mCAAG,uGACKC,EAAAA,EAAAA,GAAM,GAAD,OAfvB,6CAeuB,mBAhBhB,mCAgBgB,kBACUJ,IAFpB,OAImB,KAH7BK,EADU,QAILC,KAAKC,QAAQC,QAChBC,EAAYJ,EAAOC,KAAKC,QAAQG,KAAI,kBAAkB,CAACC,GAAnB,EAAEA,GAAqBC,MAAvB,EAAMA,MAAN,IAC1CpB,EAAUiB,KAEVI,MAAM,kBACNnB,EAAS,KATK,2CAAH,qDAYfS,IACAX,EAAU,GAfT,CAgBF,GAAE,CAACQ,IAiBJ,OACE,iCACE,UAACd,EAAD,CAAiB4B,SAjBrB,SAAkBC,GAChBA,EAAEC,iBACY,KAAVvB,EACFM,EAAgB,CAAEN,MAAM,GAAD,OAAKA,KAE5BoB,MAAM,2BAGT,EASG,WACE,kBAAOI,KAAK,OAAOC,MAAOzB,EAAO0B,SARlB,SAAAJ,GACnBA,EAAEC,iBACFtB,EAASqB,EAAEK,OAAOF,MACnB,KAMK,2CAEF,SAAC,EAAAG,SAAD,CAAUC,UAAU,sCAApB,SACqB,IAAlB/B,EAAOiB,QACN,SAACnB,EAAD,6DAEA,wBACGE,EAAOmB,KAAI,SAAAa,GAAK,OACf,SAACnC,EAAD,WACE,SAAC,KAAD,CAAMoC,GAAE,kBAAaD,EAAMZ,IAAMc,MAAO,CAAEC,KAAM/B,GAAhD,UACE,uBAAI4B,EAAMX,WAFQW,EAAMZ,GADb,UAY5B,C","sources":["pages/Movies.styled.js","pages/Movies.jsx"],"sourcesContent":["import styled from 'styled-components';\n\nexport const SearchMovieForm = styled.form`\n  margin: 20px;\n`;\nexport const SearchMovieItem = styled.li`\n  margin: 10px;\n`;\n\nexport const SearchEmpty = styled.b`\n  margin: 20px;\n`;\n","import axios from 'axios';\nimport { Suspense, useEffect, useState } from 'react';\nimport { Link, useLocation, useSearchParams } from 'react-router-dom';\nimport { SearchEmpty, SearchMovieForm, SearchMovieItem } from './Movies.styled';\n\n// https://api.themoviedb.org/3/search/movie?api_key=<<api_key>>&query=ant\nconst api_key = 'cbd8bb6ab7443496075b168356471aed';\nconst url = `https://api.themoviedb.org/3/search/movie?`;\n\nconst Movies = () => {\n  const [movies, setMovies] = useState([]);\n  const [query, setQuery] = useState('');\n  const location = useLocation();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const searchQuery = searchParams.get('query');\n\n  useEffect(() => {\n    if (!searchQuery) {\n      return;\n    }\n\n    const fetchData = async () => {\n      const result = await axios(\n        `${url}api_key=${api_key}&query=${searchQuery}`\n      );\n      if (result.data.results.length !== 0) {\n        const searchArr = result.data.results.map(({id, title}) => ({id, title}))\n        setMovies(searchArr);\n      } else {\n        alert('Nothing found.');\n        setQuery('');\n      }\n    };\n    fetchData();\n    setMovies([]);\n  }, [searchQuery]);\n\n  function onSubmit(e) {\n    e.preventDefault();\n    if (query !== '') {\n      setSearchParams({ query: `${query}` });\n    } else {\n      alert('Please enter your query.');\n      return;\n    }\n  }\n\n  const handleChange = e => {\n    e.preventDefault();\n    setQuery(e.target.value);\n  };\n\n  return (\n    <>\n      <SearchMovieForm onSubmit={onSubmit}>\n        <input type=\"text\" value={query} onChange={handleChange} />\n        <button>Search</button>\n      </SearchMovieForm>\n      <Suspense fallback={<b>Loading...</b>}>\n        {movies.length === 0 ? (\n          <SearchEmpty>There are no movies. Please enter your query.</SearchEmpty>\n        ) : (\n          <ul>\n            {movies.map(movie => (\n              <SearchMovieItem key={movie.id}>\n                <Link to={`/movies/${movie.id}`} state={{ from: location }}>\n                  <p>{movie.title}</p>\n                </Link>\n              </SearchMovieItem>\n            ))}\n          </ul>\n        )}\n      </Suspense>\n    </>\n  );\n};\n\nexport default Movies;\n"],"names":["SearchMovieForm","styled","SearchMovieItem","SearchEmpty","useState","movies","setMovies","query","setQuery","location","useLocation","useSearchParams","searchParams","setSearchParams","searchQuery","get","useEffect","fetchData","axios","result","data","results","length","searchArr","map","id","title","alert","onSubmit","e","preventDefault","type","value","onChange","target","Suspense","fallback","movie","to","state","from"],"sourceRoot":""}